(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2626],{1948:function(e,t,a){Promise.resolve().then(a.bind(a,1193))},8030:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});var s=a(2265);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&a.indexOf(e)===t).join(" ")};/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,s.forwardRef)((e,t)=>{let{color:a="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:c="",children:u,iconNode:d,...h}=e;return(0,s.createElement)("svg",{ref:t,...i,width:r,height:r,stroke:a,strokeWidth:l?24*Number(o)/Number(r):o,className:n("lucide",c),...h},[...d.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(u)?u:[u]])}),l=(e,t)=>{let a=(0,s.forwardRef)((a,i)=>{let{className:l,...c}=a;return(0,s.createElement)(o,{ref:i,iconNode:t,className:n(`lucide-${r(e)}`,l),...c})});return a.displayName=`${e}`,a}},5137:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(8030).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6780:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(8030).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},7019:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(8030).Z)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},5733:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(8030).Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},4453:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(8030).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},4086:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(8030).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},2022:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(8030).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},6463:function(e,t,a){"use strict";var s=a(1169);a.o(s,"notFound")&&a.d(t,{notFound:function(){return s.notFound}}),a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})},1193:function(e,t,a){"use strict";a.r(t);var s=a(7437),r=a(2265),n=a(7138),i=a(6463),o=a(5137),l=a(2022),c=a(6780),u=a(4086),d=a(4453),h=a(7019),m=a(5733),f=a(7632);t.default=()=>{let e=(0,i.useRouter)(),{login:t,isAuthenticated:a,loading:g}=(0,f.E)();(0,r.useEffect)(()=>{document.title="Login | Seni Indah Gypsum & Interior"},[]);let[y,p]=(0,r.useState)(!1),[x,b]=(0,r.useState)({email:"",password:""}),[w,v]=(0,r.useState)(!1),[k,j]=(0,r.useState)("");(0,r.useEffect)(()=>{!g&&a&&e.push("/dashboard")},[a,g,e]);let N=e=>{let{name:t,value:a}=e.target;b(e=>({...e,[t]:a})),k&&j("")},S=async a=>{a.preventDefault(),v(!0),j("");try{let a=await t(x.email,x.password);if(a.success)e.push("/dashboard");else{let e="Login gagal. Silakan coba lagi.";if(a.message){let t=a.message.toLowerCase();t.includes("email")||t.includes("password")||t.includes("username")||t.includes("salah")||t.includes("wrong")||t.includes("invalid")||t.includes("unauthorized")?e="Email atau password salah.":t.includes("network")||t.includes("connection")?e="Koneksi bermasalah. Coba lagi.":t.includes("timeout")&&(e="Koneksi timeout. Coba lagi.")}j(e)}}catch(t){let e="Terjadi kesalahan. Coba lagi.";if(t.message){let a=t.message.toLowerCase();(a.includes("network")||a.includes("fetch"))&&(e="Koneksi bermasalah. Coba lagi.")}j(e)}finally{v(!1)}};if(g)return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-50 via-white to-secondary-50",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-green-600"})});let C={containerClass:"bg-red-50 border-red-200",textClass:"text-red-600",iconColor:"text-red-500"};return(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-white to-secondary-50 relative overflow-hidden flex items-center justify-center px-4 py-8",children:[(0,s.jsxs)("div",{className:"absolute inset-0 opacity-15",children:[(0,s.jsx)("div",{className:"absolute top-20 left-20 w-40 h-40 bg-primary rounded-full animate-pulse"}),(0,s.jsx)("div",{className:"absolute top-60 right-32 w-24 h-24 bg-secondary rounded-full"}),(0,s.jsx)("div",{className:"absolute bottom-40 left-1/3 w-32 h-32 bg-secondary-400 rounded-full animate-pulse"}),(0,s.jsx)("div",{className:"absolute bottom-20 right-20 w-16 h-16 bg-primary rounded-full"}),(0,s.jsx)("div",{className:"absolute top-1/3 left-1/4 w-20 h-20 bg-secondary-300 rounded-full"}),(0,s.jsx)("div",{className:"absolute top-80 right-60 w-12 h-12 bg-primary rounded-full animate-pulse"}),(0,s.jsx)("div",{className:"absolute top-40 left-60 w-16 h-16 bg-secondary transform rotate-45"}),(0,s.jsx)("div",{className:"absolute bottom-60 right-40 w-20 h-20 bg-primary-500 transform rotate-12"}),(0,s.jsx)("div",{className:"absolute top-96 left-20 w-8 h-24 bg-secondary-400 transform -rotate-45"})]}),(0,s.jsx)("div",{className:"absolute inset-0 opacity-8",children:(0,s.jsx)("div",{className:"grid grid-cols-20 gap-6 h-full w-full",children:Array.from({length:100}).map((e,t)=>(0,s.jsx)("div",{className:`w-1 h-1 rounded-full ${t%3==0?"bg-primary":t%3==1?"bg-secondary":"bg-secondary-300"}`},t))})}),(0,s.jsxs)("div",{className:"relative w-full max-w-md z-10",children:[(0,s.jsxs)(n.default,{href:"/",className:"inline-flex items-center gap-2 text-gray-600 hover:text-green-600 transition-colors duration-200 mb-6 group",children:[(0,s.jsx)(o.Z,{size:20,className:"group-hover:-translate-x-1 transition-transform duration-200"}),(0,s.jsx)("span",{className:"font-medium",children:"Kembali ke Beranda"})]}),(0,s.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 p-8",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:(0,s.jsx)(l.Z,{className:"w-8 h-8 text-green-600"})}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Selamat Datang"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Masuk ke akun Anda untuk melanjutkan"})]}),k&&(0,s.jsx)("div",{className:`mb-6 p-4 border rounded-lg ${C.containerClass}`,children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(c.Z,{className:`w-5 h-5 flex-shrink-0 ${C.iconColor}`}),(0,s.jsx)("p",{className:`text-sm font-medium ${C.textClass}`,children:k})]})}),(0,s.jsxs)("form",{onSubmit:S,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)(u.Z,{className:"h-5 w-5 text-gray-400"})}),(0,s.jsx)("input",{type:"email",id:"email",name:"email",value:x.email,onChange:N,className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors duration-200 bg-white/50",placeholder:"nama@email.com",required:!0,disabled:w})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)(d.Z,{className:"h-5 w-5 text-gray-400"})}),(0,s.jsx)("input",{type:y?"text":"password",id:"password",name:"password",value:x.password,onChange:N,className:"block w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors duration-200 bg-white/50",placeholder:"Masukkan password",required:!0,disabled:w}),(0,s.jsx)("button",{type:"button",onClick:()=>{p(!y)},className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 transition-colors duration-200",disabled:w,children:y?(0,s.jsx)(h.Z,{size:20}):(0,s.jsx)(m.Z,{size:20})})]})]}),(0,s.jsx)("button",{type:"submit",disabled:w,className:"w-full flex items-center justify-center px-4 py-3 border border-transparent text-base font-medium rounded-lg text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:w?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Memproses..."]}):"Masuk"})]}),(0,s.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Lupa password atau butuh bantuan?"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Hubungi administrator sistem"})]})})]})]})]})}},7632:function(e,t,a){"use strict";a.d(t,{AuthProvider:function(){return u},E:function(){return d}});var s=a(7437),r=a(2265),n=a(9775);class i{constructor(){this.tokenKey="auth_token",this.userKey="auth_user",this.baseUrl="https://api.seniindah.co.id"}async login(e){try{let t=await (0,n.sg)("/v1.0/auth/login",e);if(t.success&&"object"==typeof t.data&&t.data.token)return this.setToken(t.data.token),this.setUser(t.data.user),this.scheduleTokenRefresh(t.data.expires_in||3600),{success:!0,user:t.data.user};return{success:!1,message:"string"==typeof t.data?t.data:"Login gagal"}}catch(e){if(e instanceof n.MS)return{success:!1,message:e.message||"Terjadi kesalahan saat login"};return{success:!1,message:"Terjadi kesalahan koneksi"}}}async logout(){try{this.getToken()&&await (0,n.sg)("/v1.0/auth/logout",{})}catch(e){}finally{this.clearAuth()}}async verifyToken(){if(!this.getToken())return!1;try{return(await (0,n.sg)("/v1.0/auth/verify",{})).success}catch(e){return e instanceof n.MS&&(401===e.status||403===e.status)&&this.clearAuth(),!1}}async refreshToken(){if(!this.getToken())return!1;try{let e=await (0,n.sg)("/v1.0/auth/refresh",{});if(e.success&&"object"==typeof e.data&&e.data.token)return this.setToken(e.data.token),this.scheduleTokenRefresh(e.data.expires_in||3600),!0;return!1}catch(e){return e instanceof n.MS&&(401===e.status||403===e.status)&&this.clearAuth(),!1}}setToken(e){localStorage.setItem(this.tokenKey,e)}getToken(){return localStorage.getItem(this.tokenKey)}setUser(e){localStorage.setItem(this.userKey,JSON.stringify(e))}getUser(){{let e=localStorage.getItem(this.userKey);return e?JSON.parse(e):null}}isAuthenticated(){return!!this.getToken()}clearAuth(){localStorage.removeItem(this.tokenKey),localStorage.removeItem(this.userKey)}scheduleTokenRefresh(e){setTimeout(async()=>{await this.refreshToken()||(this.clearAuth(),window.location.href="/login")},(e-300)*1e3)}getAuthHeader(){let e=this.getToken();return e?{Authorization:`Bearer ${e}`}:{}}async changePassword(e,t){try{let a=await (0,n.sg)("/v1.0/auth/change-password",{currentPassword:e,newPassword:t});if(a.success)return{success:!0,message:"Password berhasil diubah"};return{success:!1,message:"string"==typeof a.data?a.data:"Gagal mengubah password"}}catch(e){if(e instanceof n.MS)return{success:!1,message:e.message||"Terjadi kesalahan saat mengubah password"};return{success:!1,message:"Terjadi kesalahan koneksi"}}}}let o=new i,l=()=>{let[e,t]=(0,r.useState)(null),[a,s]=(0,r.useState)(!0),[n,i]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{(async()=>{s(!0),o.getToken()&&(await o.verifyToken()?(t(o.getUser()),i(!0)):o.clearAuth()),s(!1)})()},[]),{user:e,loading:a,isAuthenticated:n,login:async(e,a)=>{let s=await o.login({email:e,password:a});return s.success&&s.user&&(t(s.user),i(!0)),s},logout:async()=>{await o.logout(),t(null),i(!1)}}},c=(0,r.createContext)(void 0),u=e=>{let{children:t}=e,a=l();return(0,s.jsx)(c.Provider,{value:a,children:t})},d=()=>{let e=(0,r.useContext)(c);if(void 0===e)throw Error("useAuthContext must be used within an AuthProvider");return e}},9775:function(e,t,a){"use strict";a.d(t,{MS:function(){return h},U8:function(){return x},sg:function(){return p}});let s=()=>crypto.getRandomValues(new Uint8Array(12)),r=async(e,t)=>{let a=s(),r=new TextEncoder().encode(e);return{encryptedData:btoa(String.fromCharCode(...new Uint8Array(await crypto.subtle.encrypt({name:"AES-GCM",iv:a},t,r)))),iv:btoa(String.fromCharCode(...a))}},n=async(e,t,a)=>{let s=Uint8Array.from(atob(e),e=>e.charCodeAt(0)),r=Uint8Array.from(atob(t),e=>e.charCodeAt(0)),n=await crypto.subtle.decrypt({name:"AES-GCM",iv:r},a,s);return new TextDecoder().decode(n)},i=new Uint8Array([43,126,21,22,40,174,210,166,171,247,21,136,9,207,79,60,43,126,21,22,40,174,210,166,171,247,21,136,9,207,79,60]),o=null,l=async()=>{o=await crypto.subtle.importKey("raw",i,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])},c=async()=>(o||await l(),o),u=async e=>{let t=await c(),a=JSON.stringify(e),s=await r(a,t);return{data:s.encryptedData,iv:s.iv}},d=async(e,t)=>{let a=await c();return JSON.parse(await n(e,t,a))};l();class h extends Error{constructor(e,t,a){super(e),this.name="ApiError",this.status=t,this.data=a}}let m=()=>localStorage.getItem("auth_token"),f=e=>{localStorage.setItem("session_value",e)},g=()=>localStorage.getItem("session_value"),y=async e=>{let{endpoint:t,method:a="POST",headers:s={},body:r,encrypted:n=!0,formData:i=!1}=e;try{let e=`https://api.seniindah.co.id${t}`,o={...s},l=m();l&&(o.Authorization=`Bearer ${l}`),n&&!i&&(o["Accept-Encryption"]="aes-gcm");let c=null;if(r){if(i)c=r;else if(n){let e=await u(r),t=g(),a={data:e.data,iv:e.iv};t&&(a.sv=t),c=btoa(JSON.stringify(a)),o["Content-Type"]="application/json"}else c=JSON.stringify(r),o["Content-Type"]="application/json"}let y=await fetch(e,{method:a,headers:o,body:c}),p=null;try{let e=y.headers.get("content-type");if(e&&e.includes("application/json")){let e=await y.text();if(e.trim())try{let t=JSON.parse(e);if(t.status&&t.detail){if("ERROR"===t.status){try{let e=atob(t.detail),a=JSON.parse(e);p=a.data&&a.iv?await d(a.data,a.iv):a}catch(e){p={message:t.detail}}throw new h(p.message||"Server returned error",y.status,p)}try{let e=atob(t.detail),a=JSON.parse(e);if(a.data&&a.iv)p=await d(a.data,a.iv),a.xy&&f(a.xy);else throw Error("Invalid encrypted object structure")}catch(e){throw new h("Failed to decrypt response",y.status,e)}}else p=t}catch(t){p=e}else p=null}else p=await y.text()}catch(e){throw new h(`Failed to read response: ${e.message}`,y.status)}if(!y.ok)throw new h(`HTTP ${y.status}: ${y.statusText}`,y.status,p);return p}catch(e){if(e instanceof h)throw e;if(e instanceof Error)throw new h(e.message,0,e);throw new h("Unknown error occurred",0,e)}},p=function(e,t,a){let s=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return y({endpoint:e,method:"POST",body:t,headers:a,encrypted:s})},x=(e,t,a)=>y({endpoint:e,method:"POST",body:t,headers:a,encrypted:!1,formData:!0})}},function(e){e.O(0,[7138,2971,3526,1744],function(){return e(e.s=1948)}),_N_E=e.O()}]);