"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7077],{1221:function(t,e,a){a.d(e,{Pn:function(){return i},_H:function(){return n},nY:function(){return s}});let r=a(357).env.NEXT_PUBLIC_API_BASE_URL||"http://localhost:8787",i={products:{list:"/v1.0/services/product/list",detail:"/v1.0/services/product/detail",find:"/v1.0/services/product/find"},categories:{list:"/v1.0/services/product/category"},system:{slogan:"/v1.0/services/slogan/get",whatsapp:"/v1.0/services/whatsapp/get",storeLocation:"/v1.0/services/store-location/get",logo:"/v1.0/services/logo/get",categoryInfo:"/v1.0/services/category-information/get",slidingText:"/v1.0/services/sliding-text/get",faq:"/v1.0/services/faq/get"},"get-slogan":"/v1.0/services/slogan/get","get-whatsapp":"/v1.0/services/whatsapp/get","get-store-location":"/v1.0/services/store-location/get","get-logo":"/v1.0/services/logo/get","get-category-information":"/v1.0/services/category-information/get","get-sliding-text":"/v1.0/services/sliding-text/get","get-faq":"/v1.0/services/faq/get",media:"/media"},s=t=>{if(!t)return"";if(t.startsWith("http://")||t.startsWith("https://"))return t;let e=t.startsWith("/")?t.slice(1):t;return`${r}/${e}`},n={page:1,limit:20,maxLimit:100}},7077:function(t,e,a){a.d(e,{Du:function(){return l},Ew:function(){return n},To:function(){return c},wQ:function(){return o}});var r=a(1221),i=a(9775);class s{constructor(t={}){this.baseUrl=t.baseUrl||"https://api.seniindah.co.id",this.timeout=t.timeout||1e4}async getData(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let a=r.Pn[t];if(!a)return null;let s=await (0,i.sg)(a,e);if("SUCCESS"===s.status)return s.detail||null;if(s.success)return s.data?.toString()||null;return null}catch(t){return i.MS,null}}async getImageUrl(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=await this.getData(t,e);if(!a)return null;if(a.startsWith("http://")||a.startsWith("https://"))return a;let r=a.startsWith("/")?a:`/${a}`;return`${this.baseUrl}${r}`}async getBatchData(t){let e=t.map(async t=>{let e=await this.getData(t);return{key:t,data:e}}),a=await Promise.allSettled(e),r={};return a.forEach((e,a)=>{let i=t[a];"fulfilled"===e.status?r[i]=e.value.data:r[i]=null}),r}async makeRequest(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let a=await (0,i.sg)(t,e);if(!a.success)throw Error(a.data?.toString()||"API returned success: false");return a.data}catch(t){if(t instanceof i.MS)throw Error(`API Error: ${t.message}`);throw t}}async getProductList(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let e={page:t.page||r._H.page,limit:t.limit||r._H.limit,category_id:"all"===t.category_id?null:t.category_id,category_slug:t.category_slug,is_featured:t.is_featured},a=await this.makeRequest(r.Pn.products.list,e),i=a.products.map(t=>({...t,primary_image_url:(0,r.nY)(t.primary_image_url||""),has_discount:this.hasDiscount(t)}));return{...a,products:i}}catch(t){throw t}}async getProductDetail(t){try{let e=await this.makeRequest(r.Pn.products.detail,{slug:t}),a={...e.product,primary_image_url:(0,r.nY)(e.product.primary_image_url||""),images:e.product.images?.map(t=>r.nY(t))||[],has_discount:this.hasDiscount(e.product)},i=e.related_products?.map(t=>({...t,primary_image_url:r.nY(t.primary_image_url||""),has_discount:this.hasDiscount(t)}))||[];return{product:a,related_products:i}}catch(t){throw t}}async universalFind(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let e={type:t.type||"product",search_query:t.search_query||"",category_id:"all"===t.category_id?null:t.category_id,category_slug:t.category_slug,min_price:t.min_price,max_price:t.max_price,is_featured:t.is_featured,stock_status:t.stock_status,include_subcategories:t.include_subcategories||!1,page:t.page||r._H.page,limit:t.limit||r._H.limit},a=await this.makeRequest(r.Pn.products.find,e),i=a.products.map(t=>({...t,primary_image_url:(0,r.nY)(t.primary_image_url||""),has_discount:this.hasDiscount(t)}));return{...a,products:i}}catch(t){throw t}}async searchProducts(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.universalFind({type:"product",search_query:t,...e})}async getProductsByCategory(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=/^\d+$/.test(t);return this.universalFind({type:"product",category_id:a?t:null,category_slug:a?null:t,include_subcategories:e.include_subcategories||!1,page:e.page,limit:e.limit})}async getFeaturedProducts(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.getProductList({is_featured:!0,category_id:t.category_id,limit:t.limit||10,page:1})}async getProductsWithFilters(t){return t.searchQuery&&t.searchQuery.trim().length>0?this.universalFind({type:"product",search_query:t.searchQuery.trim(),category_id:t.categoryId,category_slug:t.categorySlug,min_price:t.priceRange.min,max_price:t.priceRange.max,page:t.page,limit:t.limit}):null!==t.priceRange.min||null!==t.priceRange.max?this.universalFind({type:"product",category_id:t.categoryId,category_slug:t.categorySlug,min_price:t.priceRange.min,max_price:t.priceRange.max,page:t.page,limit:t.limit}):this.getProductList({category_id:t.categoryId,category_slug:t.categorySlug,page:t.page,limit:t.limit})}async getGalleryList(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;try{let e=await this.makeRequest("/v1.0/services/gallery/list",{page:t}),a=e.galleries.map(t=>({...t,thumbnail:(0,r.nY)(t.thumbnail||"")}));return{...e,galleries:a}}catch(t){throw t}}async getGalleryDetail(t){try{let e=await this.makeRequest("/v1.0/services/gallery/get",{slug:t});return{...e,thumbnail:(0,r.nY)(e.thumbnail||""),media:{...e.media,images:e.media.images.map(t=>({...t,url:(0,r.nY)(t.url)})),videos:e.media.videos.map(t=>({...t,url:(0,r.nY)(t.url)}))}}}catch(t){throw t}}async getGalleryCategories(){try{let t=await this.getGalleryList(1),e=t.galleries.map(t=>t.category),a=e.filter((t,a)=>e.indexOf(t)===a);if(t.pagination.total_pages>1){let e=[...a];for(let a=2;a<=Math.min(t.pagination.total_pages,10);a++)(await this.getGalleryList(a)).galleries.map(t=>t.category).forEach(t=>{-1===e.indexOf(t)&&e.push(t)});return e}return a}catch(t){return[]}}async getSlogan(){return await this.getData("get-slogan")}async getWhatsApp(){return await this.getData("get-whatsapp")}async getStoreLocation(){return await this.getData("get-store-location")}async getLogo(){return await this.getImageUrl("get-logo")}async getCategoryInformation(){return await this.getData("get-category-info")}async getSlidingText(){return await this.getData("get-sliding-text")}async getFAQ(){return await this.getData("get-faq")}async getCategories(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return await this.makeRequest(r.Pn.categories.list,t)}catch(e){return await this.getData("get-categories",t)}}setBaseUrl(t){this.baseUrl=t}getBaseUrl(){return this.baseUrl}hasDiscount(t){let e=parseFloat(t.price_regular?.toString()||"0"),a=parseFloat(t.price_discount?.toString()||"0");return a>0&&a<e}getEffectivePrice(t){let e=parseFloat(t.price_regular?.toString()||"0"),a=parseFloat(t.price_discount?.toString()||"0");return a>0&&a<e?a:e}calculateDiscountPercentage(t){let e=parseFloat(t.price_regular?.toString()||"0"),a=parseFloat(t.price_discount?.toString()||"0");return this.hasDiscount(t)?Math.round((e-a)/e*100):0}}let n=new s,o=t=>t.split("-").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "),c=(t,e)=>t?`${t} | ${e}`:e,l=t=>{let e=window.location.origin;return`${e}/post/${t}`}},9775:function(t,e,a){a.d(e,{MS:function(){return d},U8:function(){return f},sg:function(){return _}});let r=()=>crypto.getRandomValues(new Uint8Array(12)),i=async(t,e)=>{let a=r(),i=new TextEncoder().encode(t);return{encryptedData:btoa(String.fromCharCode(...new Uint8Array(await crypto.subtle.encrypt({name:"AES-GCM",iv:a},e,i)))),iv:btoa(String.fromCharCode(...a))}},s=async(t,e,a)=>{let r=Uint8Array.from(atob(t),t=>t.charCodeAt(0)),i=Uint8Array.from(atob(e),t=>t.charCodeAt(0)),s=await crypto.subtle.decrypt({name:"AES-GCM",iv:i},a,r);return new TextDecoder().decode(s)},n=new Uint8Array([43,126,21,22,40,174,210,166,171,247,21,136,9,207,79,60,43,126,21,22,40,174,210,166,171,247,21,136,9,207,79,60]),o=null,c=async()=>{o=await crypto.subtle.importKey("raw",n,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])},l=async()=>(o||await c(),o),u=async t=>{let e=await l(),a=JSON.stringify(t),r=await i(a,e);return{data:r.encryptedData,iv:r.iv}},g=async(t,e)=>{let a=await l();return JSON.parse(await s(t,e,a))};c();class d extends Error{constructor(t,e,a){super(t),this.name="ApiError",this.status=e,this.data=a}}let p=()=>localStorage.getItem("auth_token"),h=t=>{localStorage.setItem("session_value",t)},y=()=>localStorage.getItem("session_value"),m=async t=>{let{endpoint:e,method:a="POST",headers:r={},body:i,encrypted:s=!0,formData:n=!1}=t;try{let t=`https://api.seniindah.co.id${e}`,o={...r},c=p();c&&(o.Authorization=`Bearer ${c}`),s&&!n&&(o["Accept-Encryption"]="aes-gcm");let l=null;if(i){if(n)l=i;else if(s){let t=await u(i),e=y(),a={data:t.data,iv:t.iv};e&&(a.sv=e),l=btoa(JSON.stringify(a)),o["Content-Type"]="application/json"}else l=JSON.stringify(i),o["Content-Type"]="application/json"}let m=await fetch(t,{method:a,headers:o,body:l}),_=null;try{let t=m.headers.get("content-type");if(t&&t.includes("application/json")){let t=await m.text();if(t.trim())try{let e=JSON.parse(t);if(e.status&&e.detail){if("ERROR"===e.status){try{let t=atob(e.detail),a=JSON.parse(t);_=a.data&&a.iv?await g(a.data,a.iv):a}catch(t){_={message:e.detail}}throw new d(_.message||"Server returned error",m.status,_)}try{let t=atob(e.detail),a=JSON.parse(t);if(a.data&&a.iv)_=await g(a.data,a.iv),a.xy&&h(a.xy);else throw Error("Invalid encrypted object structure")}catch(t){throw new d("Failed to decrypt response",m.status,t)}}else _=e}catch(e){_=t}else _=null}else _=await m.text()}catch(t){throw new d(`Failed to read response: ${t.message}`,m.status)}if(!m.ok)throw new d(`HTTP ${m.status}: ${m.statusText}`,m.status,_);return _}catch(t){if(t instanceof d)throw t;if(t instanceof Error)throw new d(t.message,0,t);throw new d("Unknown error occurred",0,t)}},_=function(t,e,a){let r=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return m({endpoint:t,method:"POST",body:e,headers:a,encrypted:r})},f=(t,e,a)=>m({endpoint:t,method:"POST",body:e,headers:a,encrypted:!1,formData:!0})}}]);